# Knowledge Graph Configuration Example
# Copy this file to config.yaml and customize the settings for your environment

# Vault Configuration
vault:
  path: "/path/to/your/obsidian/vault"  # Replace with your actual vault path
  templates_enabled: true
  template_folder: "_Templates"
  exclude_hidden: true

# LLM Configuration  
llm:
  provider: "cloud"  # "cloud" or "ollama"
  cloud:
    openai:
      # API key will be loaded from .env file
      model: "gpt-4o-mini"
      timeout: 60
  ollama:
    # Recommended models for knowledge graph extraction:
    # - qwen3:8b   - BEST: 100% accuracy, fast (13s), local, no cost
    # - qwen3:4b   - Fastest (8s), good accuracy (78%), low memory
    # - qwen3:14b  - High accuracy (93%), slower (19s)
    # - gemma3:12b - Alternative model
    # 
    # Note: Qwen3 models use special prompting to suppress chain-of-thought
    # reasoning and force clean JSON output. This is handled automatically.
    model: "qwen3:8b"
    timeout: 120  # Qwen3 may need more time for complex documents
    max_retries: 3
    retry_delay: 5
    load_balance_strategy: "round_robin"  # round_robin, random, least_connections, fastest_response
    health_check:
      interval: 30
      server_timeout: 300
      timeout: 10
    servers:
      - name: "local"
        url: "http://localhost:11434"
        enabled: true
        priority: 1
      - name: "remote-server"
        url: "http://remote-server:11434"
        enabled: false
        priority: 2

# Database Configuration
database:
  path: "auto-detect"  # Auto-detect from vault path, or specify custom path like "/path/to/database.kz"
  port: 7001
  max_connections: 5
  health_check_interval: 60

# Entity Type Extraction Rules
# Maps path keywords (lowercased) to entity types
# When a note's path contains any keyword, the corresponding type is added
# Multiple matches result in comma-separated entity_type list (e.g., "Person,VC")
entity_types:
  rules:
    - keywords: ["people", "person"]
      type: "Person"
    - keywords: ["vc"]
      type: "VC"
    - keywords: ["company", "companies", "org", "organization"]
      type: "Company"
    - keywords: ["family office", "family", "families"]
      type: "Family Office"

# Processing Configuration
processing:
  max_concurrent: 5
  chunk_size: 1024
  chunk_threshold: 0.75
  embedding_model: "minishlab/potion-base-8M"
  chunking_backend: "recursive-markdown"

# Server Configuration
server:
  host: "0.0.0.0"
  port: 7001
  debug: false
  ssl:
    enabled: false
    cert_file: null
    key_file: null

# Environment Variable Overrides
# You can also override any setting using environment variables:
# - VAULT_PATH: Override vault.path
# - LLM_PROVIDER: Override llm.provider
# - DB_PORT: Override database.port
# - SERVER_PORT: Override server.port
# - OPENAI_API_KEY: Set in .env file (required for cloud provider)

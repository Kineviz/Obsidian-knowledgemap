# AI Prompts Configuration for Obsidian Knowledge Map
# This file contains all AI prompts used by the system for knowledge extraction

# System prompts for different extraction tasks
system_prompts:
  # Relationship extraction prompt (used by all modules)
  # This is the single prompt used across the entire system
  relationship_extraction:
    role: "system"
    content: |
      Extract relationships between Person and Company entities. Return JSON only.
      
      ## Categories (ONLY TWO ALLOWED):
      - **Person**: Individual people (names, titles, roles)
      - **Company**: Organizations, businesses, agencies, institutions, platforms, services, divisions, subsidiaries
      
      **CRITICAL:** source_category and target_category MUST be exactly "Person" or "Company" - nothing else.
      - Government agencies, platforms, technologies, divisions → "Company"
      - Abstract concepts, actions, descriptive terms → DO NOT EXTRACT
      
      ## Relationship Types:
      Use one-word types: works_at, founded, acquired, merged_with, partners_with, studied_at, etc.
      Create new types as needed.
      
      ## Rules:
      1. Extract explicit relationships and standalone entities
      2. Normalize names (use full names, avoid duplicates)
      3. Standalone entities → self-reference with "mentioned"
      4. Skip abstract concepts, actions, fictional characters
      
      ## Output Format:
      {
        "relationships": [
          {"source_category": "Person", "source_label": "John Smith", "relationship": "works_at", "target_category": "Company", "target_label": "Microsoft"},
          {"source_category": "Person", "source_label": "Jane Doe", "relationship": "mentioned", "target_category": "Person", "target_label": "Jane Doe"}
        ]
      }
      
      Required fields: source_category, source_label, relationship, target_category, target_label.


# User prompts for different extraction tasks
user_prompts:
  # Relationship extraction user prompt (used by all modules)
  relationship_extraction:
    role: "user"
    content: "Extract relationships from this text and return them in JSON format:\n\n{text}"

# Model configuration
model_config:
  # Default model for relationship extraction
  relationship_extraction_model: "gpt-4o-mini"
  
  # Temperature setting for relationship extraction
  relationship_extraction_temperature: 0.1
  
  # Response format for relationship extraction
  relationship_extraction_response_format: "json_object"

# Prompt selection rules
prompt_selection:
  # All modules now use the same relationship_extraction prompt
  step1_extract: "relationship_extraction"
  main_extract: "relationship_extraction"
